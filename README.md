# 公園管理システム用CityGML変換ツール<!-- OSSの対象物の名称を記載ください。分かりやすさを重視し、できるだけ日本語で命名ください。英語名称の場合は日本語説明を（）書きで併記ください。 -->

![概要](./img/tutorial_001.png) <!-- OSSの対象物のスクリーンショット（画面表示がない場合にはイメージ画像）を貼り付けください -->

## 1. 概要 <!-- 本リポジトリでOSS化しているソフトウェア・ライブラリについて1文で説明を記載ください -->
本リポジトリでは、Project PLATEAUの令和5年度のユースケース開発業務の一部であるUC23-21「まちづくりのDXの推進に向けたユースケース開発実証業務（公園管理DX 等）」について、その成果物である「公園管理システム用CityGML変換ツール」のワークスペースを公開しています。

「公園管理システム用CityGML変換ツール」は、PLATEAUの3D都市モデルを活用し、仕様を拡張することにより格納した公園施設のCityGMLを表示用の3D Tiles, MVT, CZMLに変換します。

## 2. 「まちづくりのDXの推進に向けたユースケース開発実証業務（公園管理DX 等）」について <!-- 「」内にユースケース名称を記載ください。本文は以下のサンプルを参考に記載ください。URLはアクセンチュアにて設定しますので、サンプルそのままでOKです。 -->
「まちづくりのDXの推進に向けたユースケース開発実証業務（公園管理DX 等）」では、3D 都市モデルを活用した公園管理用のリレーショナルデータベースマネジメントシステム(RDBMS)を構築し、公園管理における管理者から現場担当者への方針伝達や点検記録、「公園施設長寿命化計画」に基づく方針立案や維持保全活動の情報共有に活用することを目的とした開発を行いました。
本システムは、RDBMS に紐づく管理用アプリケーション（OSS化対象外）と併せた利用を想定しており、施設の管理類型や健全度・緊急度判定等を把握しながら点検や計画立案・更新等の管理業務を効率化・高度化する機能の実装を行いました。
本システムの詳細については[技術検証レポート](https://www.mlit.go.jp/plateau/file/libraries/doc/plateau_tech_doc_0030_ver01.pdf)を参照してください。

## 3. 利用手順 <!-- 下記の通り、GitHub Pagesへリンクを記載ください。URLはアクセンチュアにて設定しますので、サンプルそのままでOKです。 -->
本システムの構築手順及び利用手順については[利用チュートリアル](https://r5-plateau-acn.github.io/SolarPotential/)を参照してください。

## 4. システム概要 <!-- OSS化対象のシステムが有する機能を記載ください。 -->
### 【変換】
#### ①建築物モデルの変換
- 3D都市モデル（CityGML）建築物モデルから公園施設を抽出して可視化用の3D Tilesデータセットに変換します。
- あわせてフットプリントGeoPackageデータセットを更新します。

#### ②橋梁モデルの変換
- 3D都市モデル（CityGML）橋梁モデルから公園施設を抽出して可視化用の3D Tilesデータセットに変換します。
- あわせてフットプリントGeoPackageデータセットを更新します。

#### ③都市設備モデルの変換
- 3D都市モデル（CityGML）都市設備モデル（DM属性で記述されている柵・門・看板を除く）から公園施設を抽出して可視化用の3D Tilesデータセットに変換します。
- あわせてフットプリントGeoPackageデータセットを更新します。

#### ④水部モデルの変換　
- 3D都市モデル（CityGML）水部モデルから公園施設を抽出して可視化用の3D Tilesデータセットに変換します。
- あわせてフットプリントGeoPackageデータセットを更新します。

#### ⑤区域モデルの変換　
- 3D都市モデル（CityGML）区域モデルから都市公園の区域を抽出して可視化用のMVTデータセットに変換します。
- あわせてフットプリントGeoPackageデータセットを更新します。

#### ⑥徒歩道モデルの変換　
- 3D都市モデル（CityGML）徒歩道モデルから都市公園の区域を抽出して可視化用のMVTデータセットに変換します。
- あわせてフットプリントGeoPackageデータセットを更新します。

#### ⑦柵・門・看板モデルの変換　
- 柵・門・看板の3Dモデル（OBJ）、GISデータ、3D都市モデル（CityGML）都市設備モデル（DM属性）に基づいて可視化用の3D Tilesデータセットに変換します。
- あわせてフットプリントGeoPackageデータセットを更新します。

#### ⑧単独木モデルの作成　
- 単独木の3Dモデル（OBJ）、植物管理台帳、3D都市モデル（CityGML）植生モデル（SolitaryVegetationObject）に基づいて可視化用の3D Tilesデータセットに変換します。
- あわせてフットプリントGeoPackageデータセットを更新します。

### 【作成】
#### ⑨ビルボードデータの作成
- ①〜⑧で作成したフットプリントGeoPackageデータを使用し、施設の写真、名称を示すCZML billboard labelを作成します。

## 5. 利用技術

| 種別              | 名称   | バージョン | 内容 |
| ----------------- | --------|-------------|-----------------------------|
| 商用ソフトウェア       | [FME Form](https://safe.com/) | 2023.1 |  |


## 6. 動作環境 <!-- 動作環境についての仕様を記載ください。 -->
| 項目               | 最小動作環境                                                                                                                                                                                                                                                                                                                                    | 推奨動作環境                   | 
| ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ | 
| OS                 | Microsoft Windows 10 以上　または macOS 12 Monterey 以上                                                                                                                                                                                                                                                                                                                  |  同左 | 
| CPU                | Pentium 4 以上                                                                                                                                                                                                                                                                                                                               | 同左              | 
| メモリ             | 8GB以上                                                                                                                                                                                                                                                                                                                                         | 同左                        |                  | 
| ネットワーク       | 【変換・作成】<br>インプットデータ（CityGMLなど）の格納先（S3）および出力先（S3）にアクセスできる環境が必要                            | 

## 7. 本リポジトリのフォルダ構成 <!-- 本GitHub上のソースファイルの構成を記載ください。 -->
| フォルダ名               | 詳細               | 
| ------------- | ------------ | 
| resources | データベースのスキーマなど                                                                                                                                                                                                                                                                                                                  |  
| workspace  | FME Formのワークスペース                                                                                                                                                                                                                                                                                                                              | 




## 8. ライセンス <!-- 変更せず、そのまま使うこと。 -->

- ソースコード及び関連ドキュメントの著作権は国土交通省に帰属します。
- 本ドキュメントは[Project PLATEAUのサイトポリシー](https://www.mlit.go.jp/plateau/site-policy/)（CCBY4.0及び政府標準利用規約2.0）に従い提供されています。

## 9. 注意事項 <!-- 変更せず、そのまま使うこと。 -->

- 本リポジトリは参考資料として提供しているものです。動作保証は行っていません。
- 本リポジトリについては予告なく変更又は削除をする可能性があります。
- 本リポジトリの利用により生じた損失及び損害等について、国土交通省はいかなる責任も負わないものとします。

## 10. 参考資料 <!-- 技術検証レポートのURLはアクセンチュアにて記載します。 -->
- 技術検証レポート: https://www.mlit.go.jp/plateau/file/libraries/doc/plateau_tech_doc_0030_ver01.pdf
- PLATEAU WebサイトのUse caseページ「カーボンニュートラル推進支援システム」: https://www.mlit.go.jp/plateau/use-case/uc22-013/
